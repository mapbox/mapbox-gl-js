!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.MapboxGeocoder=e()}}(function(){var e;return function e(t,n,r){function i(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){t.exports={"country.6646126669086080":{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},"country.12862386939497690":{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},"country.10299371396720960":{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},"country.15589894856372040":{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}},{}],2:[function(e,t,n){"use strict";function r(e){this._eventEmitter=new u,this.options=s({},this.options,e)}var i=e("suggestions"),o=e("lodash.debounce"),s=e("xtend"),u=e("events").EventEmitter,a=e("./exceptions"),c=e("mapbox/lib/services/geocoding");r.prototype={options:{placeholder:"Search",zoom:16,flyTo:!0},onAdd:function(e){this._map=e,this.mapboxClient=new c(this.options.accessToken),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this._clear=this._clear.bind(this);var t=this.container=document.createElement("div");t.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=document.createElement("span");n.className="geocoder-icon geocoder-icon-search",this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.placeholder=this.options.placeholder,this._inputEl.addEventListener("keydown",this._onKeyDown),this._inputEl.addEventListener("change",this._onChange);var r=document.createElement("div");return r.classList.add("geocoder-pin-right"),this._clearEl=document.createElement("button"),this._clearEl.className="geocoder-icon geocoder-icon-close",this._clearEl.addEventListener("click",this._clear),this._loadingEl=document.createElement("span"),this._loadingEl.className="geocoder-icon geocoder-icon-loading",r.appendChild(this._clearEl),r.appendChild(this._loadingEl),t.appendChild(n),t.appendChild(this._inputEl),t.appendChild(r),this._typeahead=new i(this._inputEl,[],{filter:!1}),this._typeahead.getItemValue=function(e){return e.place_name},t},onRemove:function(){return this.container.parentNode.removeChild(this.container),this._map=null,this},_onKeyDown:o(function(e){return e.target.value?void(e.metaKey||[9,27,37,39,13,38,40].indexOf(e.keyCode)!==-1||this._geocode(e.target.value)):this._clearEl.style.display="none"},200),_onChange:function(){this._inputEl.value&&(this._clearEl.style.display="block");var e=this._typeahead.selected;if(e){if(this.options.flyTo)if(!a[e.id]&&(e.bbox&&e.context&&e.context.length<=3||e.bbox&&!e.context)){var t=e.bbox;this._map.fitBounds([[t[0],t[1]],[t[2],t[3]]])}else a[e.id]?this._map.fitBounds(a[e.id].bbox):this._map.flyTo({center:e.center,zoom:this.options.zoom});this._eventEmitter.emit("result",{result:e})}},_geocode:function(e){this._loadingEl.style.display="block",this._eventEmitter.emit("loading");var t=this.mapboxClient.geocodeForward(e,this.options);return t.then(function(e){this._loadingEl.style.display="none";var t=e.entity;t.features.length?this._clearEl.style.display="block":(this._clearEl.style.display="none",this._typeahead.selected=null),this._eventEmitter.emit("results",t),this._typeahead.update(t.features)}.bind(this)),t.catch(function(e){this._loadingEl.style.display="none",this._eventEmitter.emit("error",{error:e})}.bind(this)),t},_clear:function(){this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._inputEl.focus(),this._clearEl.style.display="none",this._eventEmitter.emit("clear")},_onQueryResult:function(e){var t=e.entity;if(t.features.length){var n=t.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},query:function(e){return this._geocode(e).then(this._onQueryResult),this},setInput:function(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this},on:function(e,t){return this._eventEmitter.on(e,t),this},off:function(e,t){return this._eventEmitter.removeListener(e,t),this}},t.exports=r},{"./exceptions":1,events:3,"lodash.debounce":5,"mapbox/lib/services/geocoding":11,suggestions:43,xtend:47}],3:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function u(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,o,a,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(n=this._events[e],u(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(s(n))for(o=Array.prototype.slice.call(arguments,1),c=n.slice(),r=c.length,a=0;a<r;a++)c[a].apply(this,o);return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(n=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,o,u;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(u=o;u-- >0;)if(n[u]===t||n[u].listener&&n[u].listener===t){r=u;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],4:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(p===setTimeout)return setTimeout(e,0);if((p===r||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function s(e){if(f===clearTimeout)return clearTimeout(e);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function u(){y&&d&&(y=!1,d.length?m=d.concat(m):v=-1,m.length&&a())}function a(){if(!y){var e=o(u);y=!0;for(var t=m.length;t;){for(d=m,m=[];++v<t;)d&&d[v].run();v=-1,t=m.length}d=null,y=!1,s(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var p,f,h=t.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:r}catch(e){p=r}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(e){f=i}}();var d,m=[],y=!1,v=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new c(e,t)),1!==m.length||y||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],5:[function(e,t,n){(function(e){function n(e,t,n){function i(t){var n=m,r=y;return m=y=void 0,j=t,g=e.apply(r,n)}function o(e){return j=e,b=setTimeout(l,t),T?i(e):g}function a(e){var n=e-E,r=e-j,i=t-n;return P?x(i,v-r):i}function c(e){var n=e-E,r=e-j;return void 0===E||n>=t||n<0||P&&r>=v}function l(){var e=_();return c(e)?p(e):void(b=setTimeout(l,a(e)))}function p(e){return b=void 0,A&&m?i(e):(m=y=void 0,g)}function f(){void 0!==b&&clearTimeout(b),j=0,m=E=y=b=void 0}function h(){return void 0===b?g:p(_())}function d(){var e=_(),n=c(e);if(m=arguments,y=this,E=e,n){if(void 0===b)return o(E);if(P)return b=setTimeout(l,t),i(E)}return void 0===b&&(b=setTimeout(l,t)),g}var m,y,v,g,b,E,j=0,T=!1,P=!1,A=!0;if("function"!=typeof e)throw new TypeError(u);return t=s(t)||0,r(n)&&(T=!!n.leading,P="maxWait"in n,v=P?w(s(n.maxWait)||0,t):v,A="trailing"in n?!!n.trailing:A),d.cancel=f,d.flush=h,d}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function i(e){return!!e&&"object"==typeof e}function o(e){return"symbol"==typeof e||i(e)&&b.call(e)==c}function s(e){if("number"==typeof e)return e;if(o(e))return a;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(l,"");var n=f.test(e);return n||h.test(e)?d(e.slice(2),n?2:8):p.test(e)?a:+e}var u="Expected a function",a=NaN,c="[object Symbol]",l=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,h=/^0o[0-7]+$/i,d=parseInt,m="object"==typeof e&&e&&e.Object===Object&&e,y="object"==typeof self&&self&&self.Object===Object&&self,v=m||y||Function("return this")(),g=Object.prototype,b=g.toString,w=Math.max,x=Math.min,_=function(){return v.Date.now()};t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){"use strict";"undefined"==typeof Promise&&e("../vendor/promise");var r=e("rest/interceptor"),i=r({success:function(e){var t=e&&e.callback;return"function"==typeof t&&t(null,e.entity,e),e},error:function(e){var t=e&&e.callback;if("function"==typeof t){var n=e.error||e.entity;"object"!=typeof n&&(n=new Error(n)),t(n)}return e}});t.exports=i},{"../vendor/promise":42,"rest/interceptor":18}],7:[function(e,t,n){"use strict";"undefined"==typeof Promise&&e("../vendor/promise");var r=e("rest"),i=e("./standard_response"),o=e("./callbackify");t.exports=function(t){return r.wrap(e("rest/interceptor/errorCode")).wrap(e("rest/interceptor/pathPrefix"),{prefix:t.endpoint}).wrap(e("rest/interceptor/mime"),{mime:"application/json"}).wrap(e("rest/interceptor/params")).wrap(e("rest/interceptor/defaultRequest"),{params:{access_token:t.accessToken}}).wrap(e("rest/interceptor/template")).wrap(i).wrap(o)}},{"../vendor/promise":42,"./callbackify":6,"./standard_response":12,rest:14,"rest/interceptor/defaultRequest":19,"rest/interceptor/errorCode":20,"rest/interceptor/mime":21,"rest/interceptor/params":22,"rest/interceptor/pathPrefix":23,"rest/interceptor/template":24}],8:[function(e,t,n){t.exports.DEFAULT_ENDPOINT="https://api.mapbox.com",t.exports.API_GEOCODING_FORWARD="/geocoding/v5/{dataset}/{query}.json{?proximity,country,types,bbox,limit}",t.exports.API_GEOCODING_REVERSE="/geocoding/v5/{dataset}/{longitude},{latitude}.json{?types,limit}",t.exports.API_DIRECTIONS="/v4/directions/{profile}/{encodedWaypoints}.json{?alternatives,instructions,geometry,steps}",t.exports.API_DISTANCE="/distances/v1/mapbox/{profile}",t.exports.API_SURFACE="/v4/surface/{mapid}.json{?layer,fields,points,geojson,interpolate,encoded_polyline}",t.exports.API_UPLOADS="/uploads/v1/{owner}",t.exports.API_UPLOAD="/uploads/v1/{owner}/{upload}",t.exports.API_UPLOAD_CREDENTIALS="/uploads/v1/{owner}/credentials",t.exports.API_MATCHING="/matching/v4/{profile}.json",t.exports.API_DATASET_DATASETS="/datasets/v1/{owner}{?limit,start,fresh}",t.exports.API_DATASET_DATASET="/datasets/v1/{owner}/{dataset}",t.exports.API_DATASET_FEATURES="/datasets/v1/{owner}/{dataset}/features{?reverse,limit,start}",t.exports.API_DATASET_FEATURE="/datasets/v1/{owner}/{dataset}/features/{id}",t.exports.API_TILESTATS_STATISTICS="/tilestats/v1/{owner}/{tileset}",t.exports.API_TILESTATS_LAYER="/tilestats/v1/{owner}/{tileset}/{layer}",t.exports.API_TILESTATS_ATTRIBUTE="/tilestats/v1/{owner}/{tileset}/{layer}/{attribute}",t.exports.API_STATIC="/v4/{mapid}{+overlay}/{+xyz}/{width}x{height}{+retina}{.format}{?access_token}",t.exports.API_STYLES_LIST="/styles/v1/{owner}",t.exports.API_STYLES_CREATE="/styles/v1/{owner}",t.exports.API_STYLES_READ="/styles/v1/{owner}/{styleid}",t.exports.API_STYLES_UPDATE="/styles/v1/{owner}/{styleid}",t.exports.API_STYLES_DELETE="/styles/v1/{owner}/{styleid}",t.exports.API_STYLES_EMBED="/styles/v1/{owner}/{styleid}.html{?zoomwheel,title,access_token}",t.exports.API_STYLES_SPRITE="/styles/v1/{owner}/{styleid}/sprite{+retina}{.format}",t.exports.API_STYLES_SPRITE_ADD_ICON="/styles/v1/{owner}/{styleid}/sprite/{iconName}",t.exports.API_STYLES_SPRITE_DELETE_ICON="/styles/v1/{owner}/{styleid}/sprite/{iconName}",t.exports.API_STYLES_FONT_GLYPH_RANGES="/fonts/v1/{owner}/{font}/{start}-{end}.pbf"},{}],9:[function(e,t,n){"use strict";function r(e){var t=e.split(".")[1];if(!t)return null;t=t.replace(/-/g,"+").replace(/_/g,"/");var n=t.length%4;if(2===n&&(t+="=="),3===n&&(t+="="),1===n||n>3)return null;try{return JSON.parse(i.decode(t)).u}catch(e){return null}}var i=e("rest/util/base64");t.exports=r},{"rest/util/base64":33}],10:[function(e,t,n){"use strict";function r(e){function t(t,n){this.name=e,i("string"==typeof t,"accessToken required to instantiate Mapbox client");var r=o.DEFAULT_ENDPOINT;void 0!==n&&(i("object"==typeof n,"options must be an object"),n.endpoint&&(i("string"==typeof n.endpoint,"endpoint must be a string"),r=n.endpoint),n.account&&(i("string"==typeof n.account,"account must be a string"),this.owner=n.account)),this.client=s({endpoint:r,accessToken:t}),this.accessToken=t,this.endpoint=r,this.owner=this.owner||u(t),i(!!this.owner,"could not determine account from provided accessToken")}return t}var i=e("../vendor/invariant"),o=e("./constants"),s=e("./client"),u=e("./get_user");t.exports=r},{"../vendor/invariant":41,"./client":7,"./constants":8,"./get_user":9}],11:[function(e,t,n){"use strict";function r(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}var i=e("../../vendor/invariant"),o=e("../make_service"),s=e("../constants"),u=o("MapboxGeocoding"),a=5,c=3;u.prototype.geocodeForward=function(e,t,n){if(void 0===n&&"function"==typeof t&&(n=t,t={}),Array.isArray(e)){if("mapbox.places-permanent"!==t.dataset)throw new Error("Batch geocoding is only available with the mapbox.places-permanent endpoint. See https://mapbox.com/api-documentation/#batch-requests for details");e=e.join(";")}i("string"==typeof e,"query must be a string"),i("object"==typeof t,"options must be an object");var o={query:e,dataset:"mapbox.places"},u=c;return t.precision&&(i("number"==typeof t.precision,"precision option must be number"),u=t.precision),t.proximity&&(i("number"==typeof t.proximity.latitude&&"number"==typeof t.proximity.longitude,"proximity must be an object with numeric latitude & longitude properties"),o.proximity=r(t.proximity.longitude,u)+","+r(t.proximity.latitude,u)),t.bbox&&(i("number"==typeof t.bbox[0]&&"number"==typeof t.bbox[1]&&"number"==typeof t.bbox[2]&&"number"==typeof t.bbox[3]&&4===t.bbox.length,"bbox must be an array with numeric values in the form [minX, minY, maxX, maxY]"),o.bbox=t.bbox[0]+","+t.bbox[1]+","+t.bbox[2]+","+t.bbox[3]),t.limit&&(i("number"==typeof t.limit,"limit must be a number"),o.limit=t.limit),t.dataset&&(i("string"==typeof t.dataset,"dataset option must be string"),o.dataset=t.dataset),t.country&&(i("string"==typeof t.country,"country option must be string"),o.country=t.country),t.types&&(i("string"==typeof t.types,"types option must be string"),o.types=t.types),"boolean"==typeof t.autocomplete&&(i("boolean"==typeof t.autocomplete,"autocomplete must be a boolean"),o.autocomplete=t.autocomplete),this.client({path:s.API_GEOCODING_FORWARD,params:o,callback:n})},u.prototype.geocodeReverse=function(e,t,n){void 0===n&&"function"==typeof t&&(n=t,t={}),i("object"==typeof e,"location must be an object"),i("object"==typeof t,"options must be an object"),i("number"==typeof e.latitude&&"number"==typeof e.longitude,"location must be an object with numeric latitude & longitude properties");var o={dataset:"mapbox.places"};t.dataset&&(i("string"==typeof t.dataset,"dataset option must be string"),o.dataset=t.dataset);var u=a;return t.precision&&(i("number"==typeof t.precision,"precision option must be number"),u=t.precision),t.types&&(i("string"==typeof t.types,"types option must be string"),o.types=t.types),t.limit&&(i("number"==typeof t.limit,"limit option must be a number"),i(1===t.types.split(",").length,"a single type must be specified to use the limit option"),o.limit=t.limit),o.longitude=r(e.longitude,u),o.latitude=r(e.latitude,u),this.client({path:s.API_GEOCODING_REVERSE,params:o,callback:n})},t.exports=u},{"../../vendor/invariant":41,"../constants":8,"../make_service":10}],12:[function(e,t,n){function r(e){return{url:e.url,status:e.status?e.status.code:void 0,headers:e.headers,entity:e.entity,error:e.error,callback:e.request.callback}}var i=e("rest/interceptor"),o=i({response:r});t.exports=o},{"rest/interceptor":18}],13:[function(e,t,n){"use strict";function r(e,t){var n,r,i,o,s;if(n=e,i={},t){for(r in t)s=new RegExp("\\{"+r+"\\}"),s.test(n)?n=n.replace(s,encodeURIComponent(t[r]),"g"):i[r]=t[r];o=u.write(i),o&&(n+=n.indexOf("?")===-1?"?":"&",n+=o)}return n}function i(e,t){return 0===e.indexOf(t)}function o(e,t){return this instanceof o?void(e instanceof o?(this._template=e.template,this._params=s({},this._params,t)):(this._template=(e||"").toString(),this._params=t||{})):new o(e,t)}var s,u,a,c,l,p;s=e("./util/mixin"),u=e("./mime/type/application/x-www-form-urlencoded"),c=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?(\/[^?#]*)?(\?[^#]*)?(#\S*)?/i,l=/^([a-z][a-z0-9\-\+\.]*:\/\/|\/)/i,p=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?\//i,o.prototype={append:function(e,t){return new o(this._template+e,s({},this._params,t))},fullyQualify:function(){if("undefined"==typeof location)return this;if(this.isFullyQualified())return this;var e=this._template;return i(e,"//")?e=a.protocol+e:i(e,"/")?e=a.origin+e:this.isAbsolute()||(e=a.origin+a.pathname.substring(0,a.pathname.lastIndexOf("/")+1)),e.indexOf("/",8)===-1&&(e+="/"),new o(e,this._params)},isAbsolute:function(){return l.test(this.build())},isFullyQualified:function(){return p.test(this.build())},isCrossOrigin:function(){if(!a)return!0;var e=this.parts();return e.protocol!==a.protocol||e.hostname!==a.hostname||e.port!==a.port},parts:function(){var e,t;return e=this.fullyQualify().build().match(c),t={href:e[0],protocol:e[1],host:e[3]||"",hostname:e[4]||"",port:e[6],pathname:e[7]||"",search:e[8]||"",hash:e[9]||""},t.origin=t.protocol+"//"+t.host,t.port=t.port||("https:"===t.protocol?"443":"http:"===t.protocol?"80":""),t},build:function(e){return r(this._template,s({},this._params,e))},toString:function(){return this.build()}},a="undefined"!=typeof location?new o(location.href).parts():void 0,t.exports=o},{"./mime/type/application/x-www-form-urlencoded":29,"./util/mixin":36}],14:[function(e,t,n){"use strict";var r=e("./client/default"),i=e("./client/xhr");r.setPlatformDefaultClient(i),t.exports=r},{"./client/default":16,"./client/xhr":17}],15:[function(e,t,n){"use strict";t.exports=function(e,t){return t&&(e.skip=function(){return t}),e.wrap=function(t,n){return t(e,n)},e.chain=function(){return"undefined"!=typeof console&&console.log("rest.js: client.chain() is deprecated, use client.wrap() instead"),e.wrap.apply(this,arguments)},e}},{}],16:[function(e,t,n){"use strict";function r(){return o.apply(void 0,arguments)}var i,o,s;i=e("../client"),"function"!=typeof Promise&&console&&console.log&&console.log("An ES6 Promise implementation is required to use rest.js. See https://github.com/cujojs/when/blob/master/docs/es6-promise-shim.md for using when.js as a Promise polyfill."),r.setDefaultClient=function(e){o=e},r.getDefaultClient=function(){return o},r.resetDefaultClient=function(){o=s},r.setPlatformDefaultClient=function(e){if(s)throw new Error("Unable to redefine platformDefaultClient");o=s=e},t.exports=i(r)},{"../client":15}],17:[function(e,t,n){"use strict";function r(e){var t={};return e?(e.trim().split(a).forEach(function(e){var n,r,i;n=e.indexOf(":"),r=o(e.substring(0,n).trim()),i=e.substring(n+1).trim(),t[r]?Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i}),t):t}function i(e,t){return Object.keys(t||{}).forEach(function(n){if(t.hasOwnProperty(n)&&n in e)try{e[n]=t[n]}catch(e){}}),e}var o,s,u,a;o=e("../util/normalizeHeaderName"),s=e("../util/responsePromise"),u=e("../client"),a=/[\r|\n]+/,t.exports=u(function(e){return s.promise(function(t,n){var o,s,u,a,c,l,p,f;if(e="string"==typeof e?{path:e}:e||{},p={request:e},e.canceled)return p.error="precanceled",void n(p);if(f=e.engine||XMLHttpRequest,!f)return void n({request:e,error:"xhr-not-available"});c=e.entity,e.method=e.method||(c?"POST":"GET"),s=e.method,u=p.url=e.path||"";try{o=p.raw=new f,i(o,e.mixin),o.open(s,u,!0),i(o,e.mixin),a=e.headers;for(l in a)"Content-Type"===l&&"multipart/form-data"===a[l]||o.setRequestHeader(l,a[l]);e.canceled=!1,e.cancel=function(){e.canceled=!0,o.abort(),n(p)},o.onreadystatechange=function(){e.canceled||o.readyState===(f.DONE||4)&&(p.status={code:o.status,text:o.statusText},p.headers=r(o.getAllResponseHeaders()),p.entity=o.responseText,1223===p.status.code&&(p.status.code=204),p.status.code>0?t(p):setTimeout(function(){t(p)},0))};try{o.onerror=function(){p.error="loaderror",n(p)}}catch(e){}o.send(c)}catch(e){p.error="loaderror",n(p)}})})},{"../client":15,"../util/normalizeHeaderName":37,"../util/responsePromise":38}],18:[function(e,t,n){"use strict";function r(e){return e}function i(e){return e}function o(e){return e}function s(e){return this instanceof s?void c(this,e):new s(e)}function u(e){var t,n,u,c;return e=e||{},t=e.init||r,n=e.request||i,u=e.success||e.response||o,c=e.error||function(){return Promise.resolve((e.response||o).apply(this,arguments)).then(Promise.reject.bind(Promise))},function(r,i){function o(e){var t,a;return t={},a={arguments:Array.prototype.slice.call(arguments),client:o},e="string"==typeof e?{path:e}:e||{},e.originator=e.originator||o,l(n.call(t,e,i,a),function(e){var n,o,l;return l=r,e instanceof s&&(o=e.abort,l=e.client||l,n=e.response,e=e.request),n=n||Promise.resolve(e).then(function(e){return Promise.resolve(l(e)).then(function(e){return u.call(t,e,i,a)},function(e){return c.call(t,e,i,a)})}),o?Promise.race([n,o]):n},function(t){return Promise.reject({request:e,error:t})})}return"object"==typeof r&&(i=r),"function"!=typeof r&&(r=e.client||a),i=t(i||{}),p(o,r)}}var a,c,l,p;a=e("./client/default"),c=e("./util/mixin"),l=e("./util/responsePromise"),p=e("./client"),u.ComplexRequest=s,t.exports=u},{"./client":15,"./client/default":16,"./util/mixin":36,"./util/responsePromise":38}],19:[function(e,t,n){"use strict";var r,i,o;r=e("../interceptor"),i=e("../util/mixin"),o=function(){function e(e,t,n){(e in t||e in n)&&(t[e]=i({},n[e],t[e]))}function t(e,t,n){e in n&&!(e in t)&&(t[e]=n[e])}var n={method:t,path:t,params:e,headers:e,entity:t,mixin:e};return function(e,t){for(var r in n)n[r](r,e,t);return e}}(),t.exports=r({request:function(e,t){return o(e,t)}})},{"../interceptor":18,"../util/mixin":36}],20:[function(e,t,n){"use strict";var r;r=e("../interceptor"),t.exports=r({init:function(e){return e.code=e.code||400,e},response:function(e,t){return e.status&&e.status.code>=t.code?Promise.reject(e):e}})},{"../interceptor":18}],21:[function(e,t,n){"use strict";var r,i,o,s,u,a;r=e("../interceptor"),i=e("../mime"),o=e("../mime/registry"),a=e("../util/attempt"),s={read:function(e){return e},write:function(e){return e}},u={read:function(){throw"No read method found on converter"},write:function(){throw"No write method found on converter"}},t.exports=r({init:function(e){return e.registry=e.registry||o,e},request:function(e,t){var n,r;return r=e.headers||(e.headers={}),n=i.parse(r["Content-Type"]||t.mime||"text/plain"),r.Accept=r.Accept||t.accept||n.raw+", application/json;q=0.8, text/plain;q=0.5, */*;q=0.2","entity"in e?(r["Content-Type"]=n.raw,t.registry.lookup(n).catch(function(){if(t.permissive)return s;throw"mime-unknown"}).then(function(r){var i=t.client||e.originator,o=r.write||u.write;return a(o.bind(void 0,e.entity,{client:i,request:e,mime:n,registry:t.registry})).catch(function(){throw"mime-serialization"}).then(function(t){return e.entity=t,e})})):e},response:function(e,t){if(!(e.headers&&e.headers["Content-Type"]&&e.entity))return e;var n=i.parse(e.headers["Content-Type"]);return t.registry.lookup(n).catch(function(){return s}).then(function(r){var i=t.client||e.request&&e.request.originator,o=r.read||u.read;return a(o.bind(void 0,e.entity,{client:i,response:e,mime:n,registry:t.registry})).catch(function(t){throw e.error="mime-deserialization",e.cause=t,e}).then(function(t){return e.entity=t,e})})}})},{"../interceptor":18,"../mime":25,"../mime/registry":26,"../util/attempt":32}],22:[function(e,t,n){"use strict";var r,i;r=e("../interceptor"),i=e("../UrlBuilder"),t.exports=r({init:function(e){return e.params=e.params||{},e},request:function(e,t){var n,r;return n=e.path||"",r=e.params||{},e.path=new i(n,t.params).append("",r).build(),delete e.params,e}})},{"../UrlBuilder":13,"../interceptor":18}],23:[function(e,t,n){"use strict";function r(e,t){return 0===e.indexOf(t)}function i(e,t){return e.lastIndexOf(t)+t.length===e.length}var o,s;o=e("../interceptor"),s=e("../UrlBuilder"),t.exports=o({request:function(e,t){var n;return t.prefix&&!new s(e.path).isFullyQualified()&&(n=t.prefix,e.path&&(i(n,"/")||r(e.path,"/")||(n+="/"),n+=e.path),e.path=n),e}})},{"../UrlBuilder":13,"../interceptor":18}],24:[function(e,t,n){"use strict";var r,i,o;r=e("../interceptor"),i=e("../util/uriTemplate"),o=e("../util/mixin"),t.exports=r({init:function(e){return e.params=e.params||{},e.template=e.template||"",e},request:function(e,t){var n,r;return n=e.path||t.template,r=o({},e.params,t.params),e.path=i.expand(n,r),delete e.params,e}})},{"../interceptor":18,"../util/mixin":36,"../util/uriTemplate":40}],25:[function(e,t,n){"use strict";function r(e){var t,n;return t=e.split(";"),n=t[0].trim().split("+"),{raw:e,type:n[0],suffix:n[1]?"+"+n[1]:"",params:t.slice(1).reduce(function(e,t){return t=t.split("="),e[t[0].trim()]=t[1]?t[1].trim():void 0,e},{})}}t.exports={parse:r}},{}],26:[function(e,t,n){"use strict";function r(e){this.lookup=function(t){var n;return n="string"==typeof t?i.parse(t):t,e[n.raw]?e[n.raw]:e[n.type+n.suffix]?e[n.type+n.suffix]:e[n.type]?e[n.type]:e[n.suffix]?e[n.suffix]:Promise.reject(new Error('Unable to locate converter for mime "'+n.raw+'"'))},this.delegate=function(e){return{read:function(){var t=arguments;return this.lookup(e).then(function(e){return e.read.apply(this,t)}.bind(this))}.bind(this),write:function(){var t=arguments;return this.lookup(e).then(function(e){return e.write.apply(this,t)}.bind(this))}.bind(this)}},this.register=function(t,n){return e[t]=Promise.resolve(n),e[t]},this.child=function(){return new r(Object.create(e))}}var i,o;i=e("../mime"),o=new r({}),o.register("application/hal",e("./type/application/hal")),o.register("application/json",e("./type/application/json")),o.register("application/x-www-form-urlencoded",e("./type/application/x-www-form-urlencoded")),o.register("multipart/form-data",e("./type/multipart/form-data")),o.register("text/plain",e("./type/text/plain")),o.register("+json",o.delegate("application/json")),t.exports=o},{"../mime":25,"./type/application/hal":27,"./type/application/json":28,"./type/application/x-www-form-urlencoded":29,"./type/multipart/form-data":30,"./type/text/plain":31}],27:[function(e,t,n){"use strict";function r(e,t,n){Object.defineProperty(e,t,{value:n,configurable:!0,enumerable:!1,writeable:!0})}var i,o,s,u,a;i=e("../../../interceptor/pathPrefix"),o=e("../../../interceptor/template"),s=e("../../../util/find"),u=e("../../../util/lazyPromise"),a=e("../../../util/responsePromise"),t.exports={read:function(e,t){function n(e,t){(t&&l&&l.warn||l.log)&&(l.warn||l.log).call(l,"Relationship '"+e+"' is deprecated, see "+t)}var c,l;return t=t||{},c=t.client,l=t.console||l,t.registry.lookup(t.mime.suffix).then(function(n){return n.read(e,t)}).then(function(e){return s.findProperties(e,"_embedded",function(e,t,n){Object.keys(e).forEach(function(n){if(!(n in t)){var i=a({entity:e[n]});r(t,n,i)}}),r(t,n,e)}),s.findProperties(e,"_links",function(e,t,s){Object.keys(e).forEach(function(i){var s=e[i];i in t||r(t,i,a.make(u(function(){return s.deprecation&&n(i,s.deprecation),s.templated===!0?o(c)({path:s.href}):c({path:s.href})})))}),r(t,s,e),r(t,"clientFor",function(t,r){var s=e[t];if(!s)throw new Error("Unknown relationship: "+t);return s.deprecation&&n(t,s.deprecation),s.templated===!0?o(r||c,{template:s.href}):i(r||c,{prefix:s.href})}),r(t,"requestFor",function(e,t,n){var r=this.clientFor(e,n);return r(t)})}),e})},write:function(e,t){return t.registry.lookup(t.mime.suffix).then(function(n){return n.write(e,t)})}}},{"../../../interceptor/pathPrefix":23,"../../../interceptor/template":24,"../../../util/find":34,"../../../util/lazyPromise":35,"../../../util/responsePromise":38}],28:[function(e,t,n){"use strict";function r(e,t){return{read:function(t){return JSON.parse(t,e)},write:function(e){return JSON.stringify(e,t)},extend:r}}t.exports=r()},{}],29:[function(e,t,n){"use strict";function r(e){return e=encodeURIComponent(e),e.replace(s,"+")}function i(e){return e=e.replace(u," "),decodeURIComponent(e)}function o(e,t,n){return Array.isArray(n)?n.forEach(function(n){e=o(e,t,n)}):(e.length>0&&(e+="&"),e+=r(t),void 0!==n&&null!==n&&(e+="="+r(n))),e}var s,u;s=/%20/g,u=/\+/g,t.exports={read:function(e){
var t={};return e.split("&").forEach(function(e){var n,r,o;n=e.split("="),r=i(n[0]),o=2===n.length?i(n[1]):null,r in t?(Array.isArray(t[r])||(t[r]=[t[r]]),t[r].push(o)):t[r]=o}),t},write:function(e){var t="";return Object.keys(e).forEach(function(n){t=o(t,n,e[n])}),t}}},{}],30:[function(e,t,n){"use strict";function r(e){return e&&1===e.nodeType&&"FORM"===e.tagName}function i(e){var t,n=new FormData;for(var r in e)e.hasOwnProperty(r)&&(t=e[r],t instanceof File?n.append(r,t,t.name):t instanceof Blob?n.append(r,t):n.append(r,String(t)));return n}t.exports={write:function(e){if("undefined"==typeof FormData)throw new Error("The multipart/form-data mime serializer requires FormData support");if(e instanceof FormData)return e;if(r(e))return new FormData(e);if("object"==typeof e&&null!==e)return i(e);throw new Error("Unable to create FormData from object "+e)}}},{}],31:[function(e,t,n){"use strict";t.exports={read:function(e){return e},write:function(e){return e.toString()}}},{}],32:[function(e,t,n){"use strict";function r(e){try{return Promise.resolve(e())}catch(e){return Promise.reject(e)}}t.exports=r},{}],33:[function(e,t,n){"use strict";function r(e){if(/([^\u0000-\u00ff])/.test(e))throw new Error("Can't base64 encode non-ASCII characters.");for(var t,n,r,i=0,s=[];i<e.length;){switch(t=e.charCodeAt(i),r=i%3){case 0:s.push(o.charAt(t>>2));break;case 1:s.push(o.charAt((3&n)<<4|t>>4));break;case 2:s.push(o.charAt((15&n)<<2|t>>6)),s.push(o.charAt(63&t))}n=t,i+=1}return 0===r?(s.push(o.charAt((3&n)<<4)),s.push("==")):1===r&&(s.push(o.charAt((15&n)<<2)),s.push("=")),s.join("")}function i(e){if(e=e.replace(/\s/g,""),!/^[a-z0-9\+\/\s]+\={0,2}$/i.test(e)||e.length%4>0)throw new Error("Not a base64-encoded string.");var t,n,r,i=0,s=[];for(e=e.replace(/\=/g,"");i<e.length;){switch(t=o.indexOf(e.charAt(i)),r=i%4){case 1:s.push(String.fromCharCode(n<<2|t>>4));break;case 2:s.push(String.fromCharCode((15&n)<<4|t>>2));break;case 3:s.push(String.fromCharCode((3&n)<<6|t))}n=t,i+=1}return s.join("")}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports={encode:r,decode:i}},{}],34:[function(e,t,n){"use strict";t.exports={findProperties:function e(t,n,r){"object"==typeof t&&null!==t&&(n in t&&r(t[n],t,n),Object.keys(t).forEach(function(i){e(t[i],n,r)}))}}},{}],35:[function(e,t,n){"use strict";function r(e){var t,n,r,o;return t=!1,r=new Promise(function(e,t){n={resolve:e,reject:t}}),o=r.then,r.then=function(){return t||(t=!0,i(e).then(n.resolve,n.reject)),o.apply(r,arguments)},r}var i=e("./attempt");t.exports=r},{"./attempt":32}],36:[function(e,t,n){"use strict";function r(e){var t,n,r,o;for(e||(e={}),t=1,n=arguments.length;t<n;t+=1){r=arguments[t];for(o in r)o in e&&(e[o]===r[o]||o in i&&i[o]===r[o])||(e[o]=r[o])}return e}var i={};t.exports=r},{}],37:[function(e,t,n){"use strict";function r(e){return e.toLowerCase().split("-").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join("-")}t.exports=r},{}],38:[function(e,t,n){"use strict";function r(e,t){return e.then(function(e){return e&&e[t]},function(e){return Promise.reject(e&&e[t])})}function i(){return r(this,"entity")}function o(){return r(r(this,"status"),"code")}function s(){return r(this,"headers")}function u(e){return e=p(e),r(this.headers(),e)}function a(e){return e=[].concat(e),c(e.reduce(function(e,t){return e.then(function(e){if("string"==typeof t&&(t={rel:t}),"function"!=typeof e.entity.clientFor)throw new Error("Hypermedia response expected");var n=e.entity.clientFor(t.rel);return n({params:t.params})})},this))}function c(e){return e.status=o,e.headers=s,e.header=u,e.entity=i,e.follow=a,e}function l(e,t,n){return c(Promise.resolve(e).then(t,n))}var p=e("./normalizeHeaderName");l.make=c,l.reject=function(e){return c(Promise.reject(e))},l.promise=function(e){return c(new Promise(e))},t.exports=l},{"./normalizeHeaderName":37}],39:[function(e,t,n){"use strict";function r(e,t){if("string"!=typeof e)throw new Error("String required for URL encoding");return e.split("").map(function(e){if(t.hasOwnProperty(e))return e;var n=e.charCodeAt(0);if(n<=127){var r=n.toString(16).toUpperCase();return"%"+(r.length%2===1?"0":"")+r}return encodeURIComponent(e).toUpperCase()}).join("")}function i(e){return e=e||s.unreserved,function(t){return r(t,e)}}function o(e){return decodeURIComponent(e)}var s;s=function(){var e={alpha:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",digit:"0123456789"};return e.genDelims=":/?#[]@",e.subDelims="!$&'()*+,;=",e.reserved=e.genDelims+e.subDelims,e.unreserved=e.alpha+e.digit+"-._~",e.url=e.reserved+e.unreserved,e.scheme=e.alpha+e.digit+"+-.",e.userinfo=e.unreserved+e.subDelims+":",e.host=e.unreserved+e.subDelims,e.port=e.digit,e.pchar=e.unreserved+e.subDelims+":@",e.segment=e.pchar,e.path=e.segment+"/",e.query=e.pchar+"/?",e.fragment=e.pchar+"/?",Object.keys(e).reduce(function(t,n){return t[n]=e[n].split("").reduce(function(e,t){return e[t]=!0,e},{}),t},{})}(),t.exports={decode:o,encode:i(),encodeURL:i(s.url),encodeScheme:i(s.scheme),encodeUserInfo:i(s.userinfo),encodeHost:i(s.host),encodePort:i(s.port),encodePathSegment:i(s.segment),encodePath:i(s.path),encodeQuery:i(s.query),encodeFragment:i(s.fragment)}},{}],40:[function(e,t,n){"use strict";function r(e,t,n){return t.split(",").reduce(function(t,r){var i,o;if(i={},"*"===r.slice(-1)&&(r=r.slice(0,-1),i.explode=!0),a.test(r)){var u=a.exec(r);r=u[1],i.maxLength=parseInt(u[2])}return r=s.decode(r),o=n[r],void 0===o||null===o?t:(Array.isArray(o)?t=o.reduce(function(t,n){return t.length?(t+=i.explode?e.separator:",",e.named&&i.explode&&(t+=e.encoder(r),t+=n.length?"=":e.empty)):(t+=e.first,e.named&&(t+=e.encoder(r),t+=n.length?"=":e.empty)),t+=e.encoder(n)},t):"object"==typeof o?t=Object.keys(o).reduce(function(t,n){return t.length?t+=i.explode?e.separator:",":(t+=e.first,e.named&&!i.explode&&(t+=e.encoder(r),t+=o[n].length?"=":e.empty)),t+=e.encoder(n),t+=i.explode?"=":",",t+=e.encoder(o[n])},t):(o=String(o),i.maxLength&&(o=o.slice(0,i.maxLength)),t+=t.length?e.separator:e.first,e.named&&(t+=e.encoder(r),t+=o.length?"=":e.empty),t+=e.encoder(o)),t)},"")}function i(e,t){var n;if(n=u[e.slice(0,1)],n?e=e.slice(1):n=u[""],n.reserved)throw new Error("Reserved expression operations are not supported");return r(n,e,t)}function o(e,t){var n,r,o;for(o="",r=0;;){if(n=e.indexOf("{",r),n===-1){o+=e.slice(r);break}o+=e.slice(r,n),r=e.indexOf("}",n)+1,o+=i(e.slice(n+1,r-1),t)}return o}var s,u,a;s=e("./uriEncoder"),a=/^([^:]*):([0-9]+)$/,u={"":{first:"",separator:",",named:!1,empty:"",encoder:s.encode},"+":{first:"",separator:",",named:!1,empty:"",encoder:s.encodeURL},"#":{first:"#",separator:",",named:!1,empty:"",encoder:s.encodeURL},".":{first:".",separator:".",named:!1,empty:"",encoder:s.encode},"/":{first:"/",separator:"/",named:!1,empty:"",encoder:s.encode},";":{first:";",separator:";",named:!0,empty:"",encoder:s.encode},"?":{first:"?",separator:"&",named:!0,empty:"=",encoder:s.encode},"&":{first:"&",separator:"&",named:!0,empty:"=",encoder:s.encode},"=":{reserved:!0},",":{reserved:!0},"!":{reserved:!0},"@":{reserved:!0},"|":{reserved:!0}},t.exports={expand:o}},{"./uriEncoder":39}],41:[function(e,t,n){(function(e){"use strict";var n=e.env.NODE_ENV,r=function(e,t,r,i,o,s,u,a){if("production"!==n&&void 0===t)throw new Error("invariant requires an error message argument");if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,i,o,s,u,a],p=0;c=new Error(t.replace(/%s/g,function(){return l[p++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}};t.exports=r}).call(this,e("_process"))},{_process:4}],42:[function(t,n,r){(function(i,o){!function(t){"object"==typeof r?n.exports=t():"function"==typeof e&&e.amd?e(t):"undefined"!=typeof window?window.Promise=t():"undefined"!=typeof o?o.Promise=t():"undefined"!=typeof self&&(self.Promise=t())}(function(){var e;return function e(n,r,i){function o(u,a){if(!r[u]){if(!n[u]){var c="function"==typeof t&&t;if(!a&&c)return c(u,!0);if(s)return s(u,!0);throw new Error("Cannot find module '"+u+"'")}var l=r[u]={exports:{}};n[u][0].call(l.exports,function(e){var t=n[u][1][e];return o(t?t:e)},l,l.exports,e,n,r,i)}return r[u].exports}for(var s="function"==typeof t&&t,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(e,t,n){var r=e("../lib/decorators/unhandledRejection"),i=r(e("../lib/Promise"));t.exports="undefined"!=typeof o?o.Promise=i:"undefined"!=typeof self?self.Promise=i:i},{"../lib/Promise":2,"../lib/decorators/unhandledRejection":4}],2:[function(t,n,r){!function(e){"use strict";e(function(e){var t=e("./makePromise"),n=e("./Scheduler"),r=e("./env").asap;return t({scheduler:new n(r)})})}("function"==typeof e&&e.amd?e:function(e){n.exports=e(t)})},{"./Scheduler":3,"./env":5,"./makePromise":7}],3:[function(t,n,r){!function(e){"use strict";e(function(){function e(e){this._async=e,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var t=this;this.drain=function(){t._drain()}}return e.prototype.enqueue=function(e){this._queue[this._queueLen++]=e,this.run()},e.prototype.afterQueue=function(e){this._afterQueue[this._afterQueueLen++]=e,this.run()},e.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},e.prototype._drain=function(){for(var e=0;e<this._queueLen;++e)this._queue[e].run(),this._queue[e]=void 0;for(this._queueLen=0,this._running=!1,e=0;e<this._afterQueueLen;++e)this._afterQueue[e].run(),this._afterQueue[e]=void 0;this._afterQueueLen=0},e})}("function"==typeof e&&e.amd?e:function(e){n.exports=e()})},{}],4:[function(t,n,r){!function(e){"use strict";e(function(e){function t(e){throw e}function n(){}var r=e("../env").setTimer,i=e("../format");return function(e){function o(e){e.handled||(h.push(e),l("Potentially unhandled rejection ["+e.id+"] "+i.formatError(e.value)))}function s(e){var t=h.indexOf(e);t>=0&&(h.splice(t,1),p("Handled previous rejection ["+e.id+"] "+i.formatObject(e.value)))}function u(e,t){f.push(e,t),null===d&&(d=r(a,0))}function a(){for(d=null;f.length>0;)f.shift()(f.shift())}var c,l=n,p=n;"undefined"!=typeof console&&(c=console,l="undefined"!=typeof c.error?function(e){c.error(e)}:function(e){c.log(e)},p="undefined"!=typeof c.info?function(e){c.info(e)}:function(e){c.log(e)}),e.onPotentiallyUnhandledRejection=function(e){u(o,e)},e.onPotentiallyUnhandledRejectionHandled=function(e){u(s,e)},e.onFatalRejection=function(e){u(t,e.value)};var f=[],h=[],d=null;return e}})}("function"==typeof e&&e.amd?e:function(e){n.exports=e(t)})},{"../env":5,"../format":6}],5:[function(t,n,r){!function(e){"use strict";e(function(e){function t(){return"undefined"!=typeof i&&"[object process]"===Object.prototype.toString.call(i)}function n(){return"function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver}function r(e){function t(){var e=n;n=void 0,e()}var n,r=document.createTextNode(""),i=new e(t);i.observe(r,{characterData:!0});var o=0;return function(e){n=e,r.data=o^=1}}var o,s="undefined"!=typeof setTimeout&&setTimeout,u=function(e,t){return setTimeout(e,t)},a=function(e){return clearTimeout(e)},c=function(e){return s(e,0)};if(t())c=function(e){return i.nextTick(e)};else if(o=n())c=r(o);else if(!s){var l=e,p=l("vertx");u=function(e,t){return p.setTimer(t,e)},a=p.cancelTimer,c=p.runOnLoop||p.runOnContext}return{setTimer:u,clearTimer:a,asap:c}})}("function"==typeof e&&e.amd?e:function(e){n.exports=e(t)})},{}],6:[function(t,n,r){!function(e){"use strict";e(function(){function e(e){var n="object"==typeof e&&null!==e&&(e.stack||e.message)?e.stack||e.message:t(e);return e instanceof Error?n:n+" (WARNING: non-Error used)"}function t(e){var t=String(e);return"[object Object]"===t&&"undefined"!=typeof JSON&&(t=n(e,t)),t}function n(e,t){try{return JSON.stringify(e)}catch(e){return t}}return{formatError:e,formatObject:t,tryStringify:n}})}("function"==typeof e&&e.amd?e:function(e){n.exports=e()})},{}],7:[function(t,n,r){!function(e){"use strict";e(function(){return function(e){function t(e,t){this._handler=e===w?t:n(e)}function n(e){function t(e){i.resolve(e)}function n(e){i.reject(e)}function r(e){i.notify(e)}var i=new _;try{e(t,n,r)}catch(e){n(e)}return i}function r(e){return D(e)?e:new t(w,new E(v(e)))}function o(e){return new t(w,new E(new P(e)))}function s(){return ee}function u(){return new t(w,new _)}function a(e,t){var n=new _(e.receiver,e.join().context);return new t(w,n)}function c(e){return p(Y,null,e)}function l(e,t){return p(z,e,t)}function p(e,n,r){function i(t,i,s){s.resolved||f(r,o,t,e(n,i,t),s)}function o(e,t,n){l[e]=t,0===--c&&n.become(new T(l))}for(var s,u="function"==typeof n?i:o,a=new _,c=r.length>>>0,l=new Array(c),p=0;p<r.length&&!a.resolved;++p)s=r[p],void 0!==s||p in r?f(r,u,p,s,a):--c;return 0===c&&a.become(new T(l)),new t(w,a)}function f(e,t,n,r,i){if(q(r)){var o=g(r),s=o.state();0===s?o.fold(t,n,void 0,i):s>0?t(n,o.value,i):(i.become(o),h(e,n+1,o))}else t(n,r,i)}function h(e,t,n){for(var r=t;r<e.length;++r)d(v(e[r]),n)}function d(e,t){if(e!==t){var n=e.state();0===n?e.visit(e,void 0,e._unreport):0>n&&e._unreport()}}function m(e){return"object"!=typeof e||null===e?o(new TypeError("non-iterable passed to race()")):0===e.length?s():1===e.length?r(e[0]):y(e)}function y(e){var n,r,i,o=new _;for(n=0;n<e.length;++n)if(r=e[n],void 0!==r||n in e){if(i=v(r),0!==i.state()){o.become(i),h(e,n+1,i);break}i.visit(o,o.resolve,o.reject)}return new t(w,o)}function v(e){return D(e)?e._handler.join():q(e)?b(e):new T(e)}function g(e){return D(e)?e._handler.join():b(e)}function b(e){try{var t=e.then;return"function"==typeof t?new j(t,e):new T(e)}catch(e){return new P(e)}}function w(){}function x(){}function _(e,n){t.createContext(this,n),this.consumers=void 0,this.receiver=e,this.handler=void 0,this.resolved=!1}function E(e){this.handler=e}function j(e,t){_.call(this),V.enqueue(new I(e,t,this))}function T(e){t.createContext(this),this.value=e}function P(e){t.createContext(this),this.id=++X,this.value=e,this.handled=!1,this.reported=!1,this._report()}function A(e,t){this.rejection=e,this.context=t}function C(e){this.rejection=e}function L(){return new P(new TypeError("Promise cycle"))}function S(e,t){this.continuation=e,this.handler=t}function O(e,t){this.handler=t,this.value=e}function I(e,t,n){this._then=e,this.thenable=t,this.resolver=n}function k(e,t,n,r,i){try{e.call(t,n,r,i)}catch(e){r(e)}}function R(e,t,n,r){this.f=e,this.z=t,this.c=n,this.to=r,this.resolver=$,this.receiver=this}function D(e){return e instanceof t}function q(e){return("object"==typeof e||"function"==typeof e)&&null!==e}function N(e,n,r,i){return"function"!=typeof e?i.become(n):(t.enterContext(n),M(e,n.value,r,i),void t.exitContext())}function U(e,n,r,i,o){return"function"!=typeof e?o.become(r):(t.enterContext(r),Q(e,n,r.value,i,o),void t.exitContext())}function F(e,n,r,i,o){return"function"!=typeof e?o.notify(n):(t.enterContext(r),H(e,n,i,o),void t.exitContext())}function z(e,t,n){try{return e(t,n)}catch(e){return o(e)}}function M(e,t,n,r){try{r.become(v(e.call(n,t)))}catch(e){r.become(new P(e))}}function Q(e,t,n,r,i){try{e.call(r,t,n,i)}catch(e){i.become(new P(e))}}function H(e,t,n,r){try{r.notify(e.call(n,t))}catch(e){r.notify(e)}}function G(e,t){t.prototype=J(e.prototype),t.prototype.constructor=t}function Y(e,t){return t}function B(){}function K(){return"undefined"!=typeof i&&null!==i&&"function"==typeof i.emit?function(e,t){return"unhandledRejection"===e?i.emit(e,t.value,t):i.emit(e,t)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(e,t,n){var r=!1;try{var i=new n("unhandledRejection");r=i instanceof n}catch(e){}return r?function(e,r){var i=new n(e,{detail:{reason:r.value,key:r},bubbles:!1,cancelable:!0});return!t.dispatchEvent(i)}:e}(B,self,CustomEvent):B}var V=e.scheduler,W=K(),J=Object.create||function(e){function t(){}return t.prototype=e,new t};t.resolve=r,t.reject=o,t.never=s,t._defer=u,t._handler=v,t.prototype.then=function(e,t,n){var r=this._handler,i=r.join().state();if("function"!=typeof e&&i>0||"function"!=typeof t&&0>i)return new this.constructor(w,r);var o=this._beget(),s=o._handler;return r.chain(s,r.receiver,e,t,n),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype._beget=function(){return a(this._handler,this.constructor)},t.all=c,t.race=m,t._traverse=l,t._visitRemaining=h,w.prototype.when=w.prototype.become=w.prototype.notify=w.prototype.fail=w.prototype._unreport=w.prototype._report=B,w.prototype._state=0,w.prototype.state=function(){return this._state},w.prototype.join=function(){for(var e=this;void 0!==e.handler;)e=e.handler;return e},w.prototype.chain=function(e,t,n,r,i){this.when({resolver:e,receiver:t,fulfilled:n,rejected:r,progress:i})},w.prototype.visit=function(e,t,n,r){this.chain($,e,t,n,r)},w.prototype.fold=function(e,t,n,r){this.when(new R(e,t,n,r))},G(w,x),x.prototype.become=function(e){e.fail()};var $=new x;G(w,_),_.prototype._state=0,_.prototype.resolve=function(e){this.become(v(e))},_.prototype.reject=function(e){this.resolved||this.become(new P(e))},_.prototype.join=function(){if(!this.resolved)return this;for(var e=this;void 0!==e.handler;)if(e=e.handler,e===this)return this.handler=L();return e},_.prototype.run=function(){var e=this.consumers,t=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var n=0;n<e.length;++n)t.when(e[n])},_.prototype.become=function(e){this.resolved||(this.resolved=!0,this.handler=e,void 0!==this.consumers&&V.enqueue(this),void 0!==this.context&&e._report(this.context))},_.prototype.when=function(e){this.resolved?V.enqueue(new S(e,this.handler)):void 0===this.consumers?this.consumers=[e]:this.consumers.push(e)},_.prototype.notify=function(e){this.resolved||V.enqueue(new O(e,this))},_.prototype.fail=function(e){var t="undefined"==typeof e?this.context:e;this.resolved&&this.handler.join().fail(t)},_.prototype._report=function(e){this.resolved&&this.handler.join()._report(e)},_.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},G(w,E),E.prototype.when=function(e){V.enqueue(new S(e,this))},E.prototype._report=function(e){this.join()._report(e)},E.prototype._unreport=function(){this.join()._unreport()},G(_,j),G(w,T),T.prototype._state=1,T.prototype.fold=function(e,t,n,r){U(e,t,this,n,r)},T.prototype.when=function(e){N(e.fulfilled,this,e.receiver,e.resolver)};var X=0;G(w,P),P.prototype._state=-1,P.prototype.fold=function(e,t,n,r){r.become(this)},P.prototype.when=function(e){"function"==typeof e.rejected&&this._unreport(),N(e.rejected,this,e.receiver,e.resolver)},P.prototype._report=function(e){V.afterQueue(new A(this,e))},P.prototype._unreport=function(){this.handled||(this.handled=!0,V.afterQueue(new C(this)))},P.prototype.fail=function(e){this.reported=!0,W("unhandledRejection",this),t.onFatalRejection(this,void 0===e?this.context:e)},A.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,W("unhandledRejection",this.rejection)||t.onPotentiallyUnhandledRejection(this.rejection,this.context))},C.prototype.run=function(){this.rejection.reported&&(W("rejectionHandled",this.rejection)||t.onPotentiallyUnhandledRejectionHandled(this.rejection))},t.createContext=t.enterContext=t.exitContext=t.onPotentiallyUnhandledRejection=t.onPotentiallyUnhandledRejectionHandled=t.onFatalRejection=B;var Z=new w,ee=new t(w,Z);return S.prototype.run=function(){this.handler.join().when(this.continuation)},O.prototype.run=function(){var e=this.handler.consumers;if(void 0!==e)for(var t,n=0;n<e.length;++n)t=e[n],F(t.progress,this.value,this.handler,t.receiver,t.resolver)},I.prototype.run=function(){function e(e){r.resolve(e)}function t(e){r.reject(e)}function n(e){r.notify(e)}var r=this.resolver;k(this._then,this.thenable,e,t,n)},R.prototype.fulfilled=function(e){this.f.call(this.c,this.z,e,this.to)},R.prototype.rejected=function(e){this.to.reject(e)},R.prototype.progress=function(e){this.to.notify(e)},t}})}("function"==typeof e&&e.amd?e:function(e){n.exports=e()})},{}]},{},[1])(1)})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:4}],43:[function(e,t,n){"use strict";var r=e("./src/suggestions");window.Suggestions=t.exports=r},{"./src/suggestions":46}],44:[function(e,t,n){!function(){var e=this,r={};"undefined"!=typeof n?t.exports=r:e.fuzzy=r,r.simpleFilter=function(e,t){return t.filter(function(t){return r.test(e,t)})},r.test=function(e,t){return null!==r.match(e,t)},r.match=function(e,t,n){n=n||{};var r,i=0,o=[],s=t.length,u=0,a=0,c=n.pre||"",l=n.post||"",p=n.caseSensitive&&t||t.toLowerCase();e=n.caseSensitive&&e||e.toLowerCase();for(var f=0;f<s;f++)r=t[f],p[f]===e[i]?(r=c+r+l,i+=1,a+=1+a):a=0,u+=a,o[o.length]=r;return i===e.length?(u=p===e?1/0:u,{rendered:o.join(""),score:u}):null},r.filter=function(e,t,n){return t&&0!==t.length?"string"!=typeof e?t:(n=n||{},t.reduce(function(t,i,o,s){var u=i;n.extract&&(u=n.extract(i));var a=r.match(e,u,n);return null!=a&&(t[t.length]={string:a.rendered,score:a.score,index:o,original:i}),t},[]).sort(function(e,t){var n=t.score-e.score;return n?n:e.index-t.index})):[]}}()},{}],45:[function(e,t,n){"Use strict";var r=function(e){return this.component=e,this.items=[],this.active=0,this.element=document.createElement("ul"),this.element.className="suggestions",e.el.parentNode.insertBefore(this.element,e.el.nextSibling),this};r.prototype.show=function(){this.element.style.display="block"},r.prototype.hide=function(){this.element.style.display="none"},r.prototype.add=function(e){this.items.push(e)},r.prototype.clear=function(){this.items=[],this.active=0},r.prototype.isEmpty=function(){return!this.items.length},r.prototype.draw=function(){if(this.element.innerHTML="",0===this.items.length)return void this.hide();for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()},r.prototype.drawItem=function(e,t){var n=document.createElement("li"),r=document.createElement("a");t&&(n.className+=" active"),r.innerHTML=e.string,n.appendChild(r),this.element.appendChild(n),n.addEventListener("mousedown",function(){this.handleMouseDown.call(this,e)}.bind(this))},r.prototype.handleMouseDown=function(e){this.component.value(e.original),this.clear(),this.draw()},r.prototype.move=function(e){this.active=e,this.draw()},r.prototype.previous=function(){this.move(0===this.active?this.items.length-1:this.active-1)},r.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},t.exports=r},{}],46:[function(e,t,n){"use strict";var r=e("xtend"),i=e("fuzzy"),o=e("./list"),s=function(e,t,n){return n=n||{},this.options=r({minLength:2,limit:5,filter:!0},n),this.el=e,this.data=t||[],this.list=new o(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(e){this.handleKeyUp(e.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(e){this.handleKeyDown(e)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this};s.prototype.handleKeyUp=function(e){if(40!==e&&38!==e&&27!==e&&13!==e&&9!==e)return this.query=this.normalize(this.el.value),this.list.clear(),this.query.length<this.options.minLength?void this.list.draw():void this.getCandidates(function(e){for(var t=0;t<e.length&&(this.list.add(e[t]),t!==this.options.limit-1);t++);this.list.draw()}.bind(this))},s.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},s.prototype.handleBlur=function(){this.list.hide()},s.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show()},s.prototype.update=function(e){this.data=e,this.handleKeyUp()},s.prototype.clear=function(){this.data=[],this.list.clear()},s.prototype.normalize=function(e){return e=e.toLowerCase()},s.prototype.match=function(e,t){return e.indexOf(t)>-1},s.prototype.value=function(e){if(this.selected=e,this.el.value=this.getItemValue(e),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.el.dispatchEvent(t)}else this.el.fireEvent("onchange")},s.prototype.getCandidates=function(e){var t={pre:"<strong>",post:"</strong>",extract:function(e){return this.getItemValue(e)}.bind(this)},n=this.options.filter?i.filter(this.query,this.data,t):this.data.map(function(e){return{original:e,string:this.getItemValue(e).replace(new RegExp("("+this.query+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})}}.bind(this));e(n)},s.prototype.getItemValue=function(e){return e},t.exports=s},{"./list":45,fuzzy:44,xtend:47}],47:[function(e,t,n){function r(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)i.call(n,r)&&(e[r]=n[r])}return e}t.exports=r;var i=Object.prototype.hasOwnProperty},{}]},{},[2])(2)});
