<!DOCTYPE html>
<html>

<head>
  <title>Mapbox GL JS debug page</title>
  <meta charset='utf-8'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <link rel='stylesheet' href='/dist/mapbox-gl.css' />
  <style>
    body {
      margin: 0;
      padding: 0;
    }

    html,
    body,
    #map {
      height: 100%;
    }
  </style>
</head>

<body>
  <div id='map'></div>

  <script src='/dist/mapbox-gl-dev.js'></script>
  <script src='/debug/access_token_generated.js'></script>
  <script>

    const map = window.map = new mapboxgl.Map({
      container: 'map',
      style: 'mapbox://styles/mapbox/streets-v10'
    });

    map.on('load', async () => {
      const geojson = await fetch('https://storage.googleapis.com/storage.ubidev.net/mapbox-gl-js/329034912902/geojsonsample-1178.json').then(res => res.json());
      map.addSource('src', {
        type: 'geojson',
        data: geojson
      });

      map.addLayer({
        type: 'fill',
        id: 'layer',
        source: 'src',
        paint: {
          'fill-opacity': 0.3
        }
      });

      map.on('mousemove', event => {
        map.queryRenderedFeatures(event.point, { layers: ['layer'] })
      });
    });

  </script>
</body>

</html>