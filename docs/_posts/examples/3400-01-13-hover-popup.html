---
layout: example
category: example
title: Display a popup over a point on hover
description: When a user hovers over a GeoJSON point show a popup displaying a title and description.
---
<div id='map'></div>
<style>
.mapboxgl-popup-content { max-width:240px; }
</style>
<script>
var features = [{
    type: 'Feature',
    properties: {
        description: "<a href=\'http://www.mtpleasantdc.com/makeitmtpleasant\' target=\'_blank\' title=\'Opens in a new window\'>Make it Mount Pleasant</a> is a handmade and vintage market and afternoon of live entertainment and kids activities. 12:00-6:00 p.m.",
        'marker-symbol': 'theatre',
        title: 'Make it Mount Pleasant'
    },
    geometry: {
        coordinates: [-77.038659, 38.931567],
        type: 'Point'
    }
}, {
    type: 'Feature',
    properties: {
        description: "Head to Lounge 201 (201 Massachusetts Avenue NE) Sunday for a <a href=\'http://madmens5finale.eventbrite.com/\' target=\'_blank\' title=\'Opens in a new window\'>Mad Men Season Five Finale Watch Party</a>, complete with 60s costume contest, Mad Men trivia, and retro food and drink. 8:00-11:00 p.m. $10 general admission, $20 admission and two hour open bar.",
        'marker-symbol': 'theatre',
        title: 'Mad Men Season Five Finale Watch Party'
    },
    geometry: {
        coordinates: [-77.003168, 38.894651],
        type: 'Point'
    }
}, {
    type: 'Feature',
    properties: {
        description: "EatBar (2761 Washington Boulevard Arlington VA) is throwing a <a href=\'http://tallulaeatbar.ticketleap.com/2012beachblanket/\' target=\'_blank\' title=\'Opens in a new window\'>Big Backyard Beach Bash and Wine Fest</a> on Saturday, serving up conch fritters, fish tacos and crab sliders, and Red Apron hot dogs. 12:00-3:00 p.m. $25.grill hot dogs.",
        'marker-symbol': 'bar',
        title: 'Big Backyard Beach Bash and Wine Fest'
    },
    geometry: {
        coordinates: [-77.090372, 38.881189 ],
        type: 'Point'
    }
}, {
    type: 'Feature',
    properties: {
        description: "Feeling dandy? Get fancy, grab your bike, and take part in this year's <a href=\'http://dandiesandquaintrelles.com/2012/04/the-seersucker-social-is-set-for-june-9th-save-the-date-and-start-planning-your-look/\' target=\'_blank\' title=\'Opens in a new window\'>Seersucker Social</a> bike ride from Dandies and Quaintrelles. After the ride enjoy a lawn party at Hillwood with jazz, cocktails, paper hat-making, and more. 11:00-7:00 p.m.",
        'marker-symbol': 'bicycle',
        title: 'Seersucker Bike Ride and Social'
    },
    geometry: {
        coordinates: [-77.052477, 38.943951],
        type: 'Point'
    }
}, {
    type: 'Feature',
    properties: {
        description: "Jazz-influenced hip hop artist <a href=\'http://www.muhsinah.com\' target=\'_blank\' title=\'Opens in a new window\'>Muhsinah</a> plays the <a href=\'http://www.blackcatdc.com\'>Black Cat</a> (1811 14th Street NW) tonight with <a href=\'http://www.exitclov.com\' target=\'_blank\' title=\'Opens in a new window\'>Exit Clov</a> and <a href=\'http://godsilla.bandcamp.com\' target=\'_blank\' title=\'Opens in a new window\'>Godsâ€™illa</a>. 9:00 p.m. $12.",
        'marker-symbol': 'music',
        title: 'Muhsinah'
    },
    geometry: {
        coordinates: [-77.031706, 38.914581],
        type: 'Point'
    }
}, {
    type: 'Feature',
    properties: {
        description: "The Arlington Players' production of Stephen Sondheim's  <a href=\'http://www.thearlingtonplayers.org/drupal-6.20/node/4661/show\' target=\'_blank\' title=\'Opens in a new window\'><em>A Little Night Music</em></a> comes to the Kogod Cradle at The Mead Center for American Theater (1101 6th Street SW) this weekend and next. 8:00 p.m. ",
        'marker-symbol': 'music',
        title: 'A Little Night Music'
    },
    geometry: {
        coordinates: [-77.020945, 38.878241],
        type: 'Point'
    }
}, {
    type: 'Feature',
    properties: {
        description: '<a href=\'http://www.truckeroodc.com/www/\' target=\'_blank\'>Truckeroo</a> brings dozens of food trucks, live music, and games to half and M Street SE (across from Navy Yard Metro Station) today from 11:00 a.m. to 11:00 p.m.',
        'marker-symbol': 'music',
        title: 'Truckeroo'
    },
    geometry: {
        coordinates: [-77.007481, 38.876516],
        type: 'Point'
    }
}];

var popup;
var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v8',
    center: [-77.0316, 38.8924],
    zoom: 11
});

var style = {
    id: 'poi',
    type: 'symbol',
    source: 'geojson',
    interactive: true, // Required for featuresAt to work
    layout: {
        'icon-image': '{marker-symbol}-15',
        'icon-allow-overlap': true
    }
};

map.on('load', function() {
    map.addSource('geojson', {
        'type': 'geojson',
        'data':  {
            'type': 'FeatureCollection',
            'features': features
        }
    });

    map.addLayer(style);

    map.on('mousemove', function(e) {
        map.featuresAt(e.point, {
            radius: 7.5, // Half the marker size (15px).
            includeGeometry: true,
            layer: [ 'poi' ]
        }, function(err, feature) {
            if (err) return console.error(err);

            // If a previous popup was found, remove it.
            if (document.getElementById('popup-container')) popup.remove();
            if (feature.length) {
                // If more than one feature was captured, just grab the first one.
                feature = feature[0];

                // Change the cursor style as a UI indicator.
                map.getCanvas().style.cursor = 'pointer';

                // Build the contents for the popup.
                var container = document.createElement('div');
                    container.id = 'popup-container';
                var title = document.createElement('h4');
                    title.textContent = feature.properties.title;
                var description = document.createElement('p');
                    description.innerHTML = feature.properties.description;

                container.appendChild(title);
                container.appendChild(description);

                // Initialize a popup and set its coordinates
                // based on the feature found.
                popup = new mapboxgl.Popup({
                      closeButton: false,
                      closeOnClick: false
                    })
                    .setLngLat(feature.geometry.coordinates)
                    .setHTML(container.outerHTML)
                    .addTo(map);

            } else {
                // Return the cursor style back to original state.
                map.getCanvas().style.cursor = 'grab';
            }
        });
    });
});
</script>
