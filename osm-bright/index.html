<html>
<head>
    <title>WebGL</title>
    <meta charset='utf-8'>
    <link rel='stylesheet' type='text/css' href='https://www.mapbox.com/base/18b3144/base.css' />
    <link rel='stylesheet' type='text/css' href='../common/site.css' />
</head>
<body>

<div id='map'></div>

<div class='pin-bottom text-right'>
    <span class='pad2 pill'><!--
     --><a href='#' class='button js-prev icon prev'>Prev</a><!--
     --><a href='#' class='button js-next rcon next'>Next</a>
    </span>
</div>


<script src='https://mapbox.s3.amazonaws.com/mapbox-gl-js/master/mapbox-gl.js'></script>
<script src='../common/domready.js'></script>
<script src='../common/key.js'></script>
<script>
mapboxgl.util.getJSON('https://www.mapbox.com/mapbox-gl-styles/styles/bright-v3.json', function(err, style) {
    if (err) throw err;

    var tick = 0;
    var places = [
        [41.8756208, -87.6243706],
        [37.7756648, -122.4136613],
        [-54.815705, -68.306905],
        [9.116267, -79.698239],
        [-33.925911, 18.423378],
        [48.852274, 2.352175],
        [-0.697770, -90.327458],
        [44.951838, 34.101434],
        [41.888297, 12.490745],
        [12.979275, 77.590377],
        [6.454116, 3.394557],
        [35.679458, 139.76845],
        [59.324771, 18.071048]
    ];
    var map = new mapboxgl.Map({
        container: 'map',
        style: style,
        maxZoom: 20,
        zoom: 19,
        center: places[tick],
        hash: true
    });

    document.getElementsByClassName('js-prev')[0].onclick = prev;
    document.getElementsByClassName('js-next')[0].onclick = next;

    function prev() {
        tick--;
        if (tick < 0) tick = tick + places.length;
        tick = tick % places.length;
        map.zoomPanTo(places[tick], 16, .6);
        return false;
    }

    function next() {
        tick++;
        tick = tick % places.length;
        map.zoomPanTo(places[tick], 16, .6);
        return false;
    }
});
</script>

</body>
</html>
